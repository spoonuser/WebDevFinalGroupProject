{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HostSink = void 0;\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst update_buffer_1 = require(\"../utility/update-buffer\");\nconst sink_1 = require(\"./sink\");\nclass HostSink extends sink_1.SimpleSinkBase {\n  constructor(_host, _force = false) {\n    super();\n    this._host = _host;\n    this._force = _force;\n    this._filesToDelete = new Set();\n    this._filesToRename = new Set();\n    this._filesToCreate = new Map();\n    this._filesToUpdate = new Map();\n  }\n  _validateCreateAction(action) {\n    return this._force ? rxjs_1.EMPTY : super._validateCreateAction(action);\n  }\n  _validateFileExists(p) {\n    if (this._filesToCreate.has(p) || this._filesToUpdate.has(p)) {\n      return (0, rxjs_1.of)(true);\n    }\n    if (this._filesToDelete.has(p)) {\n      return (0, rxjs_1.of)(false);\n    }\n    for (const [from, to] of this._filesToRename.values()) {\n      switch (p) {\n        case from:\n          return (0, rxjs_1.of)(false);\n        case to:\n          return (0, rxjs_1.of)(true);\n      }\n    }\n    return this._host.exists(p);\n  }\n  _overwriteFile(path, content) {\n    this._filesToUpdate.set(path, update_buffer_1.UpdateBufferBase.create(content));\n    return rxjs_1.EMPTY;\n  }\n  _createFile(path, content) {\n    this._filesToCreate.set(path, update_buffer_1.UpdateBufferBase.create(content));\n    return rxjs_1.EMPTY;\n  }\n  _renameFile(from, to) {\n    this._filesToRename.add([from, to]);\n    return rxjs_1.EMPTY;\n  }\n  _deleteFile(path) {\n    if (this._filesToCreate.has(path)) {\n      this._filesToCreate.delete(path);\n      this._filesToUpdate.delete(path);\n    } else {\n      this._filesToDelete.add(path);\n    }\n    return rxjs_1.EMPTY;\n  }\n  _done() {\n    // Really commit everything to the actual filesystem.\n    return (0, rxjs_1.concat)((0, rxjs_1.from)([...this._filesToDelete.values()]).pipe((0, operators_1.concatMap)(path => this._host.delete(path))), (0, rxjs_1.from)([...this._filesToRename.entries()]).pipe((0, operators_1.concatMap)(([_, [path, to]]) => this._host.rename(path, to))), (0, rxjs_1.from)([...this._filesToCreate.entries()]).pipe((0, operators_1.concatMap)(([path, buffer]) => {\n      return this._host.write(path, buffer.generate());\n    })), (0, rxjs_1.from)([...this._filesToUpdate.entries()]).pipe((0, operators_1.concatMap)(([path, buffer]) => {\n      return this._host.write(path, buffer.generate());\n    }))).pipe((0, operators_1.reduce)(() => {}));\n  }\n}\nexports.HostSink = HostSink;","map":{"version":3,"names":["Object","defineProperty","exports","value","HostSink","rxjs_1","require","operators_1","update_buffer_1","sink_1","SimpleSinkBase","constructor","_host","_force","_filesToDelete","Set","_filesToRename","_filesToCreate","Map","_filesToUpdate","_validateCreateAction","action","EMPTY","_validateFileExists","p","has","of","from","to","values","exists","_overwriteFile","path","content","set","UpdateBufferBase","create","_createFile","_renameFile","add","_deleteFile","delete","_done","concat","pipe","concatMap","entries","_","rename","buffer","write","generate","reduce"],"sources":["/Users/sabyrzhanolzhabay/Web-Dev/Arabakz/ArabaFrontend/node_modules/@angular-devkit/schematics/src/sink/host.js"],"sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HostSink = void 0;\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst update_buffer_1 = require(\"../utility/update-buffer\");\nconst sink_1 = require(\"./sink\");\nclass HostSink extends sink_1.SimpleSinkBase {\n    constructor(_host, _force = false) {\n        super();\n        this._host = _host;\n        this._force = _force;\n        this._filesToDelete = new Set();\n        this._filesToRename = new Set();\n        this._filesToCreate = new Map();\n        this._filesToUpdate = new Map();\n    }\n    _validateCreateAction(action) {\n        return this._force ? rxjs_1.EMPTY : super._validateCreateAction(action);\n    }\n    _validateFileExists(p) {\n        if (this._filesToCreate.has(p) || this._filesToUpdate.has(p)) {\n            return (0, rxjs_1.of)(true);\n        }\n        if (this._filesToDelete.has(p)) {\n            return (0, rxjs_1.of)(false);\n        }\n        for (const [from, to] of this._filesToRename.values()) {\n            switch (p) {\n                case from:\n                    return (0, rxjs_1.of)(false);\n                case to:\n                    return (0, rxjs_1.of)(true);\n            }\n        }\n        return this._host.exists(p);\n    }\n    _overwriteFile(path, content) {\n        this._filesToUpdate.set(path, update_buffer_1.UpdateBufferBase.create(content));\n        return rxjs_1.EMPTY;\n    }\n    _createFile(path, content) {\n        this._filesToCreate.set(path, update_buffer_1.UpdateBufferBase.create(content));\n        return rxjs_1.EMPTY;\n    }\n    _renameFile(from, to) {\n        this._filesToRename.add([from, to]);\n        return rxjs_1.EMPTY;\n    }\n    _deleteFile(path) {\n        if (this._filesToCreate.has(path)) {\n            this._filesToCreate.delete(path);\n            this._filesToUpdate.delete(path);\n        }\n        else {\n            this._filesToDelete.add(path);\n        }\n        return rxjs_1.EMPTY;\n    }\n    _done() {\n        // Really commit everything to the actual filesystem.\n        return (0, rxjs_1.concat)((0, rxjs_1.from)([...this._filesToDelete.values()]).pipe((0, operators_1.concatMap)((path) => this._host.delete(path))), (0, rxjs_1.from)([...this._filesToRename.entries()]).pipe((0, operators_1.concatMap)(([_, [path, to]]) => this._host.rename(path, to))), (0, rxjs_1.from)([...this._filesToCreate.entries()]).pipe((0, operators_1.concatMap)(([path, buffer]) => {\n            return this._host.write(path, buffer.generate());\n        })), (0, rxjs_1.from)([...this._filesToUpdate.entries()]).pipe((0, operators_1.concatMap)(([path, buffer]) => {\n            return this._host.write(path, buffer.generate());\n        }))).pipe((0, operators_1.reduce)(() => { }));\n    }\n}\nexports.HostSink = HostSink;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}