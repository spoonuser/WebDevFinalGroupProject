{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n  message: \"must NOT have additional properties\",\n  params: ({\n    params\n  }) => (0, codegen_1._)`{additionalProperty: ${params.additionalProperty}}`\n};\nconst def = {\n  keyword: \"additionalProperties\",\n  type: [\"object\"],\n  schemaType: [\"boolean\", \"object\"],\n  allowUndefined: true,\n  trackErrors: true,\n  error,\n  code(cxt) {\n    const {\n      gen,\n      schema,\n      parentSchema,\n      data,\n      errsCount,\n      it\n    } = cxt;\n    /* istanbul ignore if */\n    if (!errsCount) throw new Error(\"ajv implementation error\");\n    const {\n      allErrors,\n      opts\n    } = it;\n    it.props = true;\n    if (opts.removeAdditional !== \"all\" && (0, util_1.alwaysValidSchema)(it, schema)) return;\n    const props = (0, code_1.allSchemaProperties)(parentSchema.properties);\n    const patProps = (0, code_1.allSchemaProperties)(parentSchema.patternProperties);\n    checkAdditionalProperties();\n    cxt.ok((0, codegen_1._)`${errsCount} === ${names_1.default.errors}`);\n    function checkAdditionalProperties() {\n      gen.forIn(\"key\", data, key => {\n        if (!props.length && !patProps.length) additionalPropertyCode(key);else gen.if(isAdditional(key), () => additionalPropertyCode(key));\n      });\n    }\n    function isAdditional(key) {\n      let definedProp;\n      if (props.length > 8) {\n        // TODO maybe an option instead of hard-coded 8?\n        const propsSchema = (0, util_1.schemaRefOrVal)(it, parentSchema.properties, \"properties\");\n        definedProp = (0, code_1.isOwnProperty)(gen, propsSchema, key);\n      } else if (props.length) {\n        definedProp = (0, codegen_1.or)(...props.map(p => (0, codegen_1._)`${key} === ${p}`));\n      } else {\n        definedProp = codegen_1.nil;\n      }\n      if (patProps.length) {\n        definedProp = (0, codegen_1.or)(definedProp, ...patProps.map(p => (0, codegen_1._)`${(0, code_1.usePattern)(cxt, p)}.test(${key})`));\n      }\n      return (0, codegen_1.not)(definedProp);\n    }\n    function deleteAdditional(key) {\n      gen.code((0, codegen_1._)`delete ${data}[${key}]`);\n    }\n    function additionalPropertyCode(key) {\n      if (opts.removeAdditional === \"all\" || opts.removeAdditional && schema === false) {\n        deleteAdditional(key);\n        return;\n      }\n      if (schema === false) {\n        cxt.setParams({\n          additionalProperty: key\n        });\n        cxt.error();\n        if (!allErrors) gen.break();\n        return;\n      }\n      if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n        const valid = gen.name(\"valid\");\n        if (opts.removeAdditional === \"failing\") {\n          applyAdditionalSchema(key, valid, false);\n          gen.if((0, codegen_1.not)(valid), () => {\n            cxt.reset();\n            deleteAdditional(key);\n          });\n        } else {\n          applyAdditionalSchema(key, valid);\n          if (!allErrors) gen.if((0, codegen_1.not)(valid), () => gen.break());\n        }\n      }\n    }\n    function applyAdditionalSchema(key, valid, errors) {\n      const subschema = {\n        keyword: \"additionalProperties\",\n        dataProp: key,\n        dataPropType: util_1.Type.Str\n      };\n      if (errors === false) {\n        Object.assign(subschema, {\n          compositeRule: true,\n          createErrors: false,\n          allErrors: false\n        });\n      }\n      cxt.subschema(subschema, valid);\n    }\n  }\n};\nexports.default = def;","map":{"version":3,"names":["Object","defineProperty","exports","value","code_1","require","codegen_1","names_1","util_1","error","message","params","_","additionalProperty","def","keyword","type","schemaType","allowUndefined","trackErrors","code","cxt","gen","schema","parentSchema","data","errsCount","it","Error","allErrors","opts","props","removeAdditional","alwaysValidSchema","allSchemaProperties","properties","patProps","patternProperties","checkAdditionalProperties","ok","default","errors","forIn","key","length","additionalPropertyCode","if","isAdditional","definedProp","propsSchema","schemaRefOrVal","isOwnProperty","or","map","p","nil","usePattern","not","deleteAdditional","setParams","break","valid","name","applyAdditionalSchema","reset","subschema","dataProp","dataPropType","Type","Str","assign","compositeRule","createErrors"],"sources":["/Users/sabyrzhanolzhabay/Web-Dev/Arabakz/ArabaFrontend/node_modules/ajv/dist/vocabularies/applicator/additionalProperties.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must NOT have additional properties\",\n    params: ({ params }) => (0, codegen_1._) `{additionalProperty: ${params.additionalProperty}}`,\n};\nconst def = {\n    keyword: \"additionalProperties\",\n    type: [\"object\"],\n    schemaType: [\"boolean\", \"object\"],\n    allowUndefined: true,\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, errsCount, it } = cxt;\n        /* istanbul ignore if */\n        if (!errsCount)\n            throw new Error(\"ajv implementation error\");\n        const { allErrors, opts } = it;\n        it.props = true;\n        if (opts.removeAdditional !== \"all\" && (0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const props = (0, code_1.allSchemaProperties)(parentSchema.properties);\n        const patProps = (0, code_1.allSchemaProperties)(parentSchema.patternProperties);\n        checkAdditionalProperties();\n        cxt.ok((0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n        function checkAdditionalProperties() {\n            gen.forIn(\"key\", data, (key) => {\n                if (!props.length && !patProps.length)\n                    additionalPropertyCode(key);\n                else\n                    gen.if(isAdditional(key), () => additionalPropertyCode(key));\n            });\n        }\n        function isAdditional(key) {\n            let definedProp;\n            if (props.length > 8) {\n                // TODO maybe an option instead of hard-coded 8?\n                const propsSchema = (0, util_1.schemaRefOrVal)(it, parentSchema.properties, \"properties\");\n                definedProp = (0, code_1.isOwnProperty)(gen, propsSchema, key);\n            }\n            else if (props.length) {\n                definedProp = (0, codegen_1.or)(...props.map((p) => (0, codegen_1._) `${key} === ${p}`));\n            }\n            else {\n                definedProp = codegen_1.nil;\n            }\n            if (patProps.length) {\n                definedProp = (0, codegen_1.or)(definedProp, ...patProps.map((p) => (0, codegen_1._) `${(0, code_1.usePattern)(cxt, p)}.test(${key})`));\n            }\n            return (0, codegen_1.not)(definedProp);\n        }\n        function deleteAdditional(key) {\n            gen.code((0, codegen_1._) `delete ${data}[${key}]`);\n        }\n        function additionalPropertyCode(key) {\n            if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n                deleteAdditional(key);\n                return;\n            }\n            if (schema === false) {\n                cxt.setParams({ additionalProperty: key });\n                cxt.error();\n                if (!allErrors)\n                    gen.break();\n                return;\n            }\n            if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n                const valid = gen.name(\"valid\");\n                if (opts.removeAdditional === \"failing\") {\n                    applyAdditionalSchema(key, valid, false);\n                    gen.if((0, codegen_1.not)(valid), () => {\n                        cxt.reset();\n                        deleteAdditional(key);\n                    });\n                }\n                else {\n                    applyAdditionalSchema(key, valid);\n                    if (!allErrors)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                }\n            }\n        }\n        function applyAdditionalSchema(key, valid, errors) {\n            const subschema = {\n                keyword: \"additionalProperties\",\n                dataProp: key,\n                dataPropType: util_1.Type.Str,\n            };\n            if (errors === false) {\n                Object.assign(subschema, {\n                    compositeRule: true,\n                    createErrors: false,\n                    allErrors: false,\n                });\n            }\n            cxt.subschema(subschema, valid);\n        }\n    },\n};\nexports.default = def;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}