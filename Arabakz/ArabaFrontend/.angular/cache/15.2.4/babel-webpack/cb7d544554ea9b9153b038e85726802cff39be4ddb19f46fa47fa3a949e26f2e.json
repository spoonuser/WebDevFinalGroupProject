{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SimpleSinkBase = void 0;\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst exception_1 = require(\"../exception/exception\");\nconst action_1 = require(\"../tree/action\");\nconst Noop = function () {};\nclass SimpleSinkBase {\n  constructor() {\n    this.preCommitAction = Noop;\n    this.postCommitAction = Noop;\n    this.preCommit = Noop;\n    this.postCommit = Noop;\n  }\n  _fileAlreadyExistException(path) {\n    throw new exception_1.FileAlreadyExistException(path);\n  }\n  _fileDoesNotExistException(path) {\n    throw new exception_1.FileDoesNotExistException(path);\n  }\n  _validateOverwriteAction(action) {\n    return this._validateFileExists(action.path).pipe((0, operators_1.map)(b => {\n      if (!b) {\n        this._fileDoesNotExistException(action.path);\n      }\n    }));\n  }\n  _validateCreateAction(action) {\n    return this._validateFileExists(action.path).pipe((0, operators_1.map)(b => {\n      if (b) {\n        this._fileAlreadyExistException(action.path);\n      }\n    }));\n  }\n  _validateRenameAction(action) {\n    return this._validateFileExists(action.path).pipe((0, operators_1.map)(b => {\n      if (!b) {\n        this._fileDoesNotExistException(action.path);\n      }\n    }), (0, operators_1.mergeMap)(() => this._validateFileExists(action.to)), (0, operators_1.map)(b => {\n      if (b) {\n        this._fileAlreadyExistException(action.to);\n      }\n    }));\n  }\n  _validateDeleteAction(action) {\n    return this._validateFileExists(action.path).pipe((0, operators_1.map)(b => {\n      if (!b) {\n        this._fileDoesNotExistException(action.path);\n      }\n    }));\n  }\n  validateSingleAction(action) {\n    switch (action.kind) {\n      case 'o':\n        return this._validateOverwriteAction(action);\n      case 'c':\n        return this._validateCreateAction(action);\n      case 'r':\n        return this._validateRenameAction(action);\n      case 'd':\n        return this._validateDeleteAction(action);\n      default:\n        throw new action_1.UnknownActionException(action);\n    }\n  }\n  commitSingleAction(action) {\n    return (0, rxjs_1.concat)(this.validateSingleAction(action), new rxjs_1.Observable(observer => {\n      let committed = null;\n      switch (action.kind) {\n        case 'o':\n          committed = this._overwriteFile(action.path, action.content);\n          break;\n        case 'c':\n          committed = this._createFile(action.path, action.content);\n          break;\n        case 'r':\n          committed = this._renameFile(action.path, action.to);\n          break;\n        case 'd':\n          committed = this._deleteFile(action.path);\n          break;\n      }\n      if (committed) {\n        committed.subscribe(observer);\n      } else {\n        observer.complete();\n      }\n    })).pipe((0, operators_1.ignoreElements)());\n  }\n  commit(tree) {\n    const actions = (0, rxjs_1.from)(tree.actions);\n    return (0, rxjs_1.concat)(this.preCommit() || (0, rxjs_1.of)(null), (0, rxjs_1.defer)(() => actions).pipe((0, operators_1.concatMap)(action => {\n      const maybeAction = this.preCommitAction(action);\n      if ((0, rxjs_1.isObservable)(maybeAction) || isPromiseLike(maybeAction)) {\n        return maybeAction;\n      }\n      return (0, rxjs_1.of)(maybeAction || action);\n    }), (0, operators_1.concatMap)(action => {\n      return (0, rxjs_1.concat)(this.commitSingleAction(action).pipe((0, operators_1.ignoreElements)()), (0, rxjs_1.of)(action));\n    }), (0, operators_1.concatMap)(action => this.postCommitAction(action) || (0, rxjs_1.of)(null))), (0, rxjs_1.defer)(() => this._done()), (0, rxjs_1.defer)(() => this.postCommit() || (0, rxjs_1.of)(null))).pipe((0, operators_1.ignoreElements)());\n  }\n}\nexports.SimpleSinkBase = SimpleSinkBase;\nfunction isPromiseLike(value) {\n  return !!value && typeof value.then === 'function';\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","SimpleSinkBase","rxjs_1","require","operators_1","exception_1","action_1","Noop","constructor","preCommitAction","postCommitAction","preCommit","postCommit","_fileAlreadyExistException","path","FileAlreadyExistException","_fileDoesNotExistException","FileDoesNotExistException","_validateOverwriteAction","action","_validateFileExists","pipe","map","b","_validateCreateAction","_validateRenameAction","mergeMap","to","_validateDeleteAction","validateSingleAction","kind","UnknownActionException","commitSingleAction","concat","Observable","observer","committed","_overwriteFile","content","_createFile","_renameFile","_deleteFile","subscribe","complete","ignoreElements","commit","tree","actions","from","of","defer","concatMap","maybeAction","isObservable","isPromiseLike","_done","then"],"sources":["/Users/sabyrzhanolzhabay/Web-Dev/Arabakz/ArabaFrontend/node_modules/@angular-devkit/schematics/src/sink/sink.js"],"sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SimpleSinkBase = void 0;\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst exception_1 = require(\"../exception/exception\");\nconst action_1 = require(\"../tree/action\");\nconst Noop = function () { };\nclass SimpleSinkBase {\n    constructor() {\n        this.preCommitAction = Noop;\n        this.postCommitAction = Noop;\n        this.preCommit = Noop;\n        this.postCommit = Noop;\n    }\n    _fileAlreadyExistException(path) {\n        throw new exception_1.FileAlreadyExistException(path);\n    }\n    _fileDoesNotExistException(path) {\n        throw new exception_1.FileDoesNotExistException(path);\n    }\n    _validateOverwriteAction(action) {\n        return this._validateFileExists(action.path).pipe((0, operators_1.map)((b) => {\n            if (!b) {\n                this._fileDoesNotExistException(action.path);\n            }\n        }));\n    }\n    _validateCreateAction(action) {\n        return this._validateFileExists(action.path).pipe((0, operators_1.map)((b) => {\n            if (b) {\n                this._fileAlreadyExistException(action.path);\n            }\n        }));\n    }\n    _validateRenameAction(action) {\n        return this._validateFileExists(action.path).pipe((0, operators_1.map)((b) => {\n            if (!b) {\n                this._fileDoesNotExistException(action.path);\n            }\n        }), (0, operators_1.mergeMap)(() => this._validateFileExists(action.to)), (0, operators_1.map)((b) => {\n            if (b) {\n                this._fileAlreadyExistException(action.to);\n            }\n        }));\n    }\n    _validateDeleteAction(action) {\n        return this._validateFileExists(action.path).pipe((0, operators_1.map)((b) => {\n            if (!b) {\n                this._fileDoesNotExistException(action.path);\n            }\n        }));\n    }\n    validateSingleAction(action) {\n        switch (action.kind) {\n            case 'o':\n                return this._validateOverwriteAction(action);\n            case 'c':\n                return this._validateCreateAction(action);\n            case 'r':\n                return this._validateRenameAction(action);\n            case 'd':\n                return this._validateDeleteAction(action);\n            default:\n                throw new action_1.UnknownActionException(action);\n        }\n    }\n    commitSingleAction(action) {\n        return (0, rxjs_1.concat)(this.validateSingleAction(action), new rxjs_1.Observable((observer) => {\n            let committed = null;\n            switch (action.kind) {\n                case 'o':\n                    committed = this._overwriteFile(action.path, action.content);\n                    break;\n                case 'c':\n                    committed = this._createFile(action.path, action.content);\n                    break;\n                case 'r':\n                    committed = this._renameFile(action.path, action.to);\n                    break;\n                case 'd':\n                    committed = this._deleteFile(action.path);\n                    break;\n            }\n            if (committed) {\n                committed.subscribe(observer);\n            }\n            else {\n                observer.complete();\n            }\n        })).pipe((0, operators_1.ignoreElements)());\n    }\n    commit(tree) {\n        const actions = (0, rxjs_1.from)(tree.actions);\n        return (0, rxjs_1.concat)(this.preCommit() || (0, rxjs_1.of)(null), (0, rxjs_1.defer)(() => actions).pipe((0, operators_1.concatMap)((action) => {\n            const maybeAction = this.preCommitAction(action);\n            if ((0, rxjs_1.isObservable)(maybeAction) || isPromiseLike(maybeAction)) {\n                return maybeAction;\n            }\n            return (0, rxjs_1.of)(maybeAction || action);\n        }), (0, operators_1.concatMap)((action) => {\n            return (0, rxjs_1.concat)(this.commitSingleAction(action).pipe((0, operators_1.ignoreElements)()), (0, rxjs_1.of)(action));\n        }), (0, operators_1.concatMap)((action) => this.postCommitAction(action) || (0, rxjs_1.of)(null))), (0, rxjs_1.defer)(() => this._done()), (0, rxjs_1.defer)(() => this.postCommit() || (0, rxjs_1.of)(null))).pipe((0, operators_1.ignoreElements)());\n    }\n}\nexports.SimpleSinkBase = SimpleSinkBase;\nfunction isPromiseLike(value) {\n    return !!value && typeof value.then === 'function';\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}